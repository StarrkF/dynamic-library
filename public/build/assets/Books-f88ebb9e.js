import{u as z}from"./config-37966956.js";import{e as Y,o as a,c as o,a as e,f as U,v as A,F as V,g as x,h as X,i as Z,j as F,_ as j,k as G,l as ee,d as b,p as q,b as O,u as te,r as le,w as se}from"./app-300efba0.js";import{_ as f,$ as i,n as D,Z as R}from"./reactivity.esm-bundler-ec77e152.js";import{_ as K}from"./BaseInput-97a001e1.js";const ae={class:"card"},oe=e("div",{class:"card-header"},"Filtreler",-1),ne={class:"card-body"},ie={class:"d-flex flex-column flex-md-row gap-4 align-items-end"},de={class:"mb-4 w-100"},ue=e("label",null,"Listele",-1),re=e("option",null,"25",-1),ce=e("option",null,"50",-1),me=e("option",null,"100",-1),ve=e("option",null,"250",-1),_e=[re,ce,me,ve],be={class:"mb-4 w-100"},pe=e("label",null,"Durum",-1),ye=e("option",{value:""},"Filtreyi Temizle",-1),ge=["value"],he={class:"mb-4 w-100"},fe=e("label",null,"Kitap Türü",-1),$e=e("option",{value:""},"Filtreyi Temizle",-1),ke=["value"],Ve={class:"mb-4 w-100"},xe=e("label",null,"Listelenecek Yer",-1),Be=e("option",{value:""},"Filtreyi Temizle",-1),we=["value"],Te={class:"mb-4 w-100"},Pe=e("label",null,"Kütüphanede",-1),Se=e("option",{value:""},"Filtreyi Temizle",-1),Ce=["value"],Ie={class:"mb-4 w-100 input-group mb-4"},Le=e("button",{class:"btn btn-outline-dark",type:"button"},[e("i",{class:"fa-solid fa-magnifying-glass"})],-1),Ue={__name:"Filters",props:{getBooks:{type:Function},filterParams:{type:Object}},setup(l){const m=l,{index:d}=z(),s=f({}),c=()=>{d("types").then(u=>{s.value.types=u.data}),d("status").then(u=>{s.value.status=u.data}),d("list_types").then(u=>{s.value.list_types=u.data}),d("libraries").then(u=>{s.value.libraries=u.data})};return Y(()=>{c()}),m.filterParams.byPage=m.filterParams.byPage??50,(u,n)=>(a(),o("div",ae,[oe,e("div",ne,[e("div",ie,[e("div",de,[ue,U(e("select",{class:"form-select form-filter","onUpdate:modelValue":n[0]||(n[0]=t=>l.filterParams.byPage=t),onChange:n[1]||(n[1]=(...t)=>l.getBooks&&l.getBooks(...t))},_e,544),[[A,l.filterParams.byPage]])]),e("div",be,[pe,U(e("select",{class:"form-select form-filter","onUpdate:modelValue":n[2]||(n[2]=t=>l.filterParams.byStatus=t),onChange:n[3]||(n[3]=(...t)=>l.getBooks&&l.getBooks(...t))},[ye,(a(!0),o(V,null,x(s.value.status,t=>(a(),o("option",{value:t.id},i(t.name),9,ge))),256))],544),[[A,l.filterParams.byStatus]])]),e("div",he,[fe,U(e("select",{class:"form-select form-filter","onUpdate:modelValue":n[4]||(n[4]=t=>l.filterParams.byType=t),onChange:n[5]||(n[5]=(...t)=>l.getBooks&&l.getBooks(...t)),required:""},[$e,(a(!0),o(V,null,x(s.value.types,t=>(a(),o("option",{value:t.id},i(t.name),9,ke))),256))],544),[[A,l.filterParams.byType]])]),e("div",Ve,[xe,U(e("select",{class:"form-select form-filter","onUpdate:modelValue":n[6]||(n[6]=t=>l.filterParams.byListType=t),onChange:n[7]||(n[7]=(...t)=>l.getBooks&&l.getBooks(...t)),required:""},[Be,(a(!0),o(V,null,x(s.value.list_types,t=>(a(),o("option",{value:t.id},i(t.name),9,we))),256))],544),[[A,l.filterParams.byListType]])]),e("div",Te,[Pe,U(e("select",{class:"form-select form-filter","onUpdate:modelValue":n[8]||(n[8]=t=>l.filterParams.byLibrary=t),onChange:n[9]||(n[9]=(...t)=>l.getBooks&&l.getBooks(...t)),required:""},[Se,(a(!0),o(V,null,x(s.value.libraries,t=>(a(),o("option",{value:t.id},i(t.name),9,Ce))),256))],544),[[A,l.filterParams.byLibrary]])]),e("div",Ie,[U(e("input",{type:"text",class:"form-control","onUpdate:modelValue":n[10]||(n[10]=t=>l.filterParams.search=t),onInput:n[11]||(n[11]=(...t)=>l.getBooks&&l.getBooks(...t)),placeholder:"Kitap, Yazar"},null,544),[[X,l.filterParams.search]]),Le])])])]))}},Ke={key:0,class:"text-danger"},Ae=["value"],De=e("option",{value:null},"Filtreyi Temizle",-1),Fe=["value"],T={__name:"BaseSelect",props:{modelValue:{type:[String,Number,Boolean,Object,Array],default:null},label:{type:String,default:""},is_required:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},setup(l){return(m,d)=>(a(),o("div",null,[e("label",null,[Z(i(l.label),1),l.is_required?(a(),o("span",Ke,"*")):F("",!0)]),e("select",{value:l.modelValue,class:"form-select",onChange:d[0]||(d[0]=s=>m.$emit("update:modelValue",s.target.value))},[De,(a(!0),o(V,null,x(l.options,s=>(a(),o("option",{value:s.id},i(s.name),9,Fe))),256))],40,Ae)]))}},ze={key:0},Ye=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),H={__name:"Alert",props:{type:{type:String,default:"danger"},message:{type:[Object,Array,String]}},setup(l){const m=l;return console.log(m.message),console.log(typeof m.message=="string"),(d,s)=>(a(),o("div",{class:D(["alert alert-dismissible fade show","alert-"+l.type]),role:"alert"},[typeof m.message=="string"?(a(),o("p",ze,i(l.message),1)):(a(!0),o(V,{key:1},x(l.message,c=>(a(),o("ul",null,[(a(!0),o(V,null,x(c,u=>(a(),o("li",null,i(u),1))),256))]))),256)),Ye],2))}};const J=l=>(q("data-v-8fa86b78"),l=l(),O(),l),je={class:"card shadow"},qe={class:"card-body"},Oe={class:"row"},Ee={class:"mb-4 col-md-6"},Ne={class:"mb-4 col-md-6"},Me={class:"mb-4 col-md-6"},Ge={class:"mb-4 col-md-6"},Re={class:"mb-4 col-md-6"},He={class:"mb-4 col-md-6"},Ze={class:"mb-4 col-md-6"},Je={class:"mb-4 col-md-6"},Qe={class:"mb-4 col-md-6"},We={class:"mb-4 col-md-6"},Xe={key:0,class:"mt-4 d-flex gap-2 justify-content-end"},et=J(()=>e("button",{type:"submit",class:"btn btn-dark"},"Kaydet",-1)),tt={key:1,class:"mt-4"},lt=J(()=>e("button",{type:"submit",class:"btn btn-primary"},"Ekle",-1)),st=[lt],at={__name:"BookAdd",props:{getBooks:{type:Function,required:!0}},setup(l,{expose:m}){const d=l,{index:s,store:c,update:u,errors:n}=z(),t=f({}),h=f({}),_=f(""),$=()=>{s("types").then(g=>{h.value.types=g.data}),s("status").then(g=>{h.value.status=g.data}),s("list_types").then(g=>{h.value.list_types=g.data}),s("libraries").then(g=>{h.value.libraries=g.data})},I=()=>{n.value=null,_.value=null,c("books",t.value).then(g=>{g&&(g&&(_.value=t.value.name+" Kitabı Başarıyla Eklendi!"),t.value={},d.getBooks())})},P=()=>{u("books",t.value.id,t.value).then(g=>{g&&(g&&(_.value=t.value.name+" Kitabı Başarıyla Güncellendi!"),t.value={},d.getBooks())})},y=()=>{t.value={}};return m({book:t}),Y(()=>{$()}),(g,r)=>(a(),o("div",{class:D(["collapse my-2",{show:t.value.edit}]),id:"bookAdd"},[R(n)?(a(),G(H,{key:0,message:R(n)},null,8,["message"])):F("",!0),_.value?(a(),G(H,{key:1,message:_.value,type:"success"},null,8,["message"])):F("",!0),e("div",je,[e("div",qe,[e("form",{onSubmit:r[10]||(r[10]=ee(v=>t.value.edit?P():I(),["prevent"]))},[e("div",Oe,[e("div",Ee,[b(K,{label:"Kitap Adı",modelValue:t.value.name,"onUpdate:modelValue":r[0]||(r[0]=v=>t.value.name=v)},null,8,["modelValue"])]),e("div",Ne,[b(K,{label:"Yazar Adı",modelValue:t.value.author,"onUpdate:modelValue":r[1]||(r[1]=v=>t.value.author=v)},null,8,["modelValue"])]),e("div",Me,[b(K,{label:"Yayın Evi",modelValue:t.value.publisher,"onUpdate:modelValue":r[2]||(r[2]=v=>t.value.publisher=v)},null,8,["modelValue"])]),e("div",Ge,[b(K,{type:"number",label:"Sayfa Sayısı",modelValue:t.value.page_count,"onUpdate:modelValue":r[3]||(r[3]=v=>t.value.page_count=v)},null,8,["modelValue"])]),e("div",Re,[b(K,{type:"date",label:"Satın Alma Tarihi",modelValue:t.value.buy_date,"onUpdate:modelValue":r[4]||(r[4]=v=>t.value.buy_date=v)},null,8,["modelValue"])]),e("div",He,[b(K,{type:"date",label:"Okunma Tarihi",modelValue:t.value.read_date,"onUpdate:modelValue":r[5]||(r[5]=v=>t.value.read_date=v)},null,8,["modelValue"])]),e("div",Ze,[b(T,{options:h.value.types,modelValue:t.value.type_id,"onUpdate:modelValue":r[6]||(r[6]=v=>t.value.type_id=v),label:"Kitap Türü"},null,8,["options","modelValue"])]),e("div",Je,[b(T,{options:h.value.list_types,modelValue:t.value.list_type_id,"onUpdate:modelValue":r[7]||(r[7]=v=>t.value.list_type_id=v),label:"Listeleneceği Yer"},null,8,["options","modelValue"])]),e("div",Qe,[b(T,{options:h.value.status,modelValue:t.value.status,"onUpdate:modelValue":r[8]||(r[8]=v=>t.value.status=v),label:"Durum"},null,8,["options","modelValue"])]),e("div",We,[b(T,{options:h.value.libraries,modelValue:t.value.in_library,"onUpdate:modelValue":r[9]||(r[9]=v=>t.value.in_library=v),label:"Kütüphanede"},null,8,["options","modelValue"])]),t.value.edit?(a(),o("div",Xe,[e("button",{onClick:y,class:"btn btn-danger"},"Vazgeç"),et])):(a(),o("div",tt,st))])],32)])])],2))}},ot=j(at,[["__scopeId","data-v-8fa86b78"]]);const E=l=>(q("data-v-4a1c655c"),l=l(),O(),l),nt={"aria-label":"Page navigation",class:"d-flex gap-2 align-items-baseline mt-3"},it={class:"pagination"},dt=E(()=>e("i",{class:"fa-solid fa-angle-left"},null,-1)),ut=[dt],rt=["onClick"],ct=E(()=>e("i",{class:"fa-solid fa-angle-right"},null,-1)),mt=[ct],vt=E(()=>e("strong",null,"Toplam Kayıt:",-1)),_t={__name:"Pagination",props:{pageInfo:{type:Object},getData:{type:Function}},setup(l){const m=l;return m.pageInfo.current_page=m.pageInfo.current_page??1,(d,s)=>(a(),o("nav",nt,[e("ul",it,[e("li",{class:D(["page-item",{disabled:l.pageInfo.current_page===1}])},[e("a",{role:"button",class:"page-link",onClick:s[0]||(s[0]=c=>l.getData(l.pageInfo.current_page-1))},ut)],2),(a(!0),o(V,null,x(l.pageInfo.last_page,c=>(a(),o("li",{class:D(["page-item",{active:c===l.pageInfo.current_page}]),key:c},[e("a",{role:"button",class:"page-link",onClick:u=>l.getData(c)},i(c),9,rt)],2))),128)),e("li",{class:D(["page-item",{disabled:l.pageInfo.current_page===l.pageInfo.last_page}])},[e("a",{role:"button",class:"page-link",onClick:s[1]||(s[1]=c=>l.getData(l.pageInfo.current_page+1))},mt)],2)]),e("small",null,[vt,Z(" "+i(l.pageInfo.total),1)])]))}},bt=j(_t,[["__scopeId","data-v-4a1c655c"]]),pt={class:"collapse my-2",id:"getDraw"},yt={class:"card"},gt=e("div",{class:"card-header text-center"},[e("h1",null,"Kura Yapmak istediklerini seç")],-1),ht={class:"card-body"},ft={class:"row"},$t={class:"col-4"},kt={class:"mb-4"},Vt={class:"mb-4"},xt={class:"mb-4"},Bt={class:"mb-4"},wt={class:"col-8"},Tt={key:0,class:"card"},Pt=e("div",{class:"card-header"},[e("h3",{class:"text-center"},"Seçilen Kitap")],-1),St={class:"card-body"},Ct={key:0,class:"d-flex justify-content-center align-items-center",style:{height:"30vh"}},It=e("div",{class:"spinner-border",role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1),Lt=[It],Ut={key:1,class:"text-center"},Kt={__name:"Draw",setup(l){const{index:m}=z(),d=f({}),s=f({}),c=f(!1),u=f({}),n=()=>{c.value=!0,m("draw",d.value).then(_=>{_&&(u.value=_.data,c.value=!1)})},t=()=>{d.value={},u.value={},c.value=!1},h=()=>{m("types").then(_=>{s.value.types=_.data}),m("status").then(_=>{s.value.status=_.data}),m("list_types").then(_=>{s.value.list_types=_.data}),m("libraries").then(_=>{s.value.libraries=_.data})};return Y(()=>{h()}),(_,$)=>{var I,P;return a(),o("div",pt,[e("div",yt,[gt,e("div",ht,[e("div",ft,[e("div",$t,[e("div",kt,[b(T,{options:s.value.types,modelValue:d.value.byType,"onUpdate:modelValue":$[0]||($[0]=y=>d.value.byType=y),label:"Kitap Türü"},null,8,["options","modelValue"])]),e("div",Vt,[b(T,{options:s.value.list_types,modelValue:d.value.byListType,"onUpdate:modelValue":$[1]||($[1]=y=>d.value.byListType=y),label:"Listeleneceği Yer"},null,8,["options","modelValue"])]),e("div",xt,[b(T,{options:s.value.status,modelValue:d.value.byStatus,"onUpdate:modelValue":$[2]||($[2]=y=>d.value.byStatus=y),label:"Durum"},null,8,["options","modelValue"])]),e("div",Bt,[b(T,{options:s.value.libraries,modelValue:d.value.byLibrary,"onUpdate:modelValue":$[3]||($[3]=y=>d.value.byLibrary=y),label:"Kütüphanede"},null,8,["options","modelValue"])]),e("button",{class:"btn btn-dark py-2 my-1 col-12",onClick:n},"Kura Çek"),c.value?(a(),o("button",{key:0,class:"btn btn-danger py-2 my-1 col-12",onClick:t},"Sıfırla")):F("",!0)]),e("div",wt,[c.value||u.value.name?(a(),o("div",Tt,[Pt,e("div",St,[c.value?(a(),o("div",Ct,Lt)):(a(),o("div",Ut,[e("h1",null,i(u.value.name),1),e("h3",null,i(u.value.author),1),e("h5",null,i(u.value.type.name)+" - "+i((I=u.value.list_type)==null?void 0:I.name)+" - "+i((P=u.value.status)==null?void 0:P.name),1)]))])])):F("",!0)])])])])])}}};const B=l=>(q("data-v-5b180c2a"),l=l(),O(),l),At={class:"card"},Dt=B(()=>e("div",{class:"card-header"},null,-1)),Ft={class:"card-body"},zt={class:"d-flex gap-2 mb-4"},Yt=B(()=>e("a",{class:"btn btn-outline-info px-5","data-bs-toggle":"collapse",href:"#bookAdd",role:"button"},"Kitap Ekle",-1)),jt=B(()=>e("button",{class:"btn btn-outline-warning px-5"},"Kitap Türleri",-1)),qt=B(()=>e("a",{class:"btn btn-outline-success px-5","data-bs-toggle":"collapse",href:"#getDraw",role:"button"},"Kura",-1)),Ot={key:0,class:"d-flex justify-content-center align-items-center",style:{height:"70vh"}},Et=B(()=>e("div",{class:"spinner-border",role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1)),Nt=[Et],Mt={key:1,class:"table-responsive"},Gt={class:"table table-striped table-hover"},Rt=["onClick"],Ht={class:"d-flex gap-1"},Zt=B(()=>e("span",null,[e("i",{role:"button",class:"fa-solid fa-sort fa-xs"})],-1)),Jt=B(()=>e("th",{scope:"col",class:"text-center"},"İşlem",-1)),Qt={class:"d-flex gap-2"},Wt=["onClick"],Xt=B(()=>e("i",{class:"fa-regular fa-pen-to-square"},null,-1)),el=[Xt],tl=["onClick"],ll=B(()=>e("i",{class:"fa-solid fa-trash-can"},null,-1)),sl=[ll],al={__name:"Books",setup(l){const m=f(null),d=f({}),s=f({}),c=f(!1),u=f(),n=f({}),t={id:"ID",name:"Kitap",author:"Yazar",publisher:"Yayıncı",page_count:"Sayfa",type:"Tür",buy_date:"Satın Alma",read_date:"Okunma",list_type:"Listelenecek Yer",status:"Durum",in_library:"Kütüphanede"},h=f({row:"id",type:"asc"}),{index:_,show:$,destroy:I}=z(),P=te(),y=()=>{c.value=!0;const k={page:n.value.currentPage,byPage:s.value.byPage,byType:s.value.byType,byListType:s.value.byListType,byStatus:s.value.byStatus,byLibrary:s.value.byLibrary,search:s.value.search,orderBy:h.value.row,orderType:h.value.type};_("books",k).then(S=>{m.value=S.data,c.value=!1,n.value=S.meta})},g=k=>{n.value.currentPage=k,y()},r=k=>{h.value={row:k,type:h.value.type=="asc"?"desc":"asc"},y()},v=k=>{$("books",k).then(S=>{var w,L;let C=S.data;const p={...C,status:(w=C.status)==null?void 0:w.id,list_type_id:C.list_type.id,in_library:(L=C.in_library)==null?void 0:L.id,type_id:C.list_type.id,edit:!0};u.value.book=p,window.scrollTo(0,0)})},Q=k=>{confirm("Silmek istediğine emin misin?")&&I("books",k).then(S=>{S&&y()})};return Y(()=>{P.params.id&&(s.value.byListType=P.params.id),y()}),(k,S)=>{const C=le("router-link");return a(),o("div",At,[Dt,e("div",Ft,[e("div",zt,[Yt,b(C,{to:"/types"},{default:se(()=>[jt]),_:1}),qt]),b(ot,{"get-books":y,ref_key:"bookAddComp",ref:u,"edit-book":d.value},null,8,["edit-book"]),b(Kt),b(Ue,{"get-books":y,"filter-params":s.value},null,8,["filter-params"]),c.value?(a(),o("div",Ot,Nt)):(a(),o("div",Mt,[e("table",Gt,[e("thead",null,[e("tr",null,[(a(),o(V,null,x(t,(p,w)=>e("th",{key:w,scope:"col",onClick:L=>r(w),role:"button"},[e("div",Ht,[Zt,e("span",null,i(p),1)])],8,Rt)),64)),Jt])]),e("tbody",null,[(a(!0),o(V,null,x(m.value,p=>{var w,L,N,M;return a(),o("tr",null,[e("th",null,i(p.id),1),e("td",null,i(p.name),1),e("td",null,[e("a",null,i(p.author),1)]),e("td",null,i(p.publisher),1),e("td",null,i(p.page_count),1),e("td",null,i((w=p.type)==null?void 0:w.name),1),e("td",null,i(p.buy_date),1),e("td",null,i(p.read_date),1),e("td",null,i((L=p.list_type)==null?void 0:L.name),1),e("td",null,i((N=p.status)==null?void 0:N.name),1),e("td",null,i((M=p.in_library)==null?void 0:M.name),1),e("td",null,[e("div",Qt,[e("button",{class:"btn btn-outline-dark",onClick:W=>v(p.id)},el,8,Wt),e("button",{class:"btn btn-outline-danger",onClick:W=>Q(p.id)},sl,8,tl)])])])}),256))])])])),b(bt,{"page-info":n.value,"get-data":g},null,8,["page-info"])])])}}},ul=j(al,[["__scopeId","data-v-5b180c2a"]]);export{ul as default};
