import{u as z}from"./config-37966956.js";import{e as Y,o as a,c as n,a as e,f as L,v as A,F as x,g as w,h as ee,i as j,j as F,_ as q,k as R,l as te,d as v,p as O,b as E,u as le,r as se,w as H}from"./app-d246a722.js";import{_ as f,$ as i,n as D,Z}from"./reactivity.esm-bundler-ec77e152.js";import{_ as U}from"./BaseInput-c4be6375.js";const ae={class:"card"},oe=e("div",{class:"card-header"},"Filtreler",-1),ne={class:"card-body"},ie={class:"d-flex flex-column flex-md-row gap-4 align-items-end"},de={class:"mb-2 w-100"},ue=e("label",null,"Listele",-1),re=e("option",null,"25",-1),ce=e("option",null,"50",-1),me=e("option",null,"100",-1),_e=e("option",null,"250",-1),ve=[re,ce,me,_e],be={class:"mb-2 w-100"},pe=e("label",null,"Durum",-1),ye=e("option",{value:""},"Filtreyi Temizle",-1),ge=["value"],he={class:"mb-2 w-100"},fe=e("label",null,"Kitap Türü",-1),$e=e("option",{value:""},"Filtreyi Temizle",-1),ke=["value"],Ve={class:"mb-2 w-100"},xe=e("label",null,"Listelenecek Yer",-1),we=e("option",{value:""},"Filtreyi Temizle",-1),Be=["value"],Te={class:"mb-2 w-100"},Pe=e("label",null,"Kütüphanede",-1),Se=e("option",{value:""},"Filtreyi Temizle",-1),Ce=["value"],Ie={class:"mb-2 w-100 input-group mb-2"},Ke=e("button",{class:"btn btn-outline-dark",type:"button"},[e("i",{class:"fa-solid fa-magnifying-glass"})],-1),Le={__name:"Filters",props:{getBooks:{type:Function},filterParams:{type:Object}},setup(l){const m=l,{index:d}=z(),s=f({}),c=()=>{d("types").then(u=>{s.value.types=u.data}),d("status").then(u=>{s.value.status=u.data}),d("list_types").then(u=>{s.value.list_types=u.data}),d("libraries").then(u=>{s.value.libraries=u.data})};return Y(()=>{c()}),m.filterParams.byPage=m.filterParams.byPage??50,(u,o)=>(a(),n("div",ae,[oe,e("div",ne,[e("div",ie,[e("div",de,[ue,L(e("select",{class:"form-select form-filter","onUpdate:modelValue":o[0]||(o[0]=t=>l.filterParams.byPage=t),onChange:o[1]||(o[1]=(...t)=>l.getBooks&&l.getBooks(...t))},ve,544),[[A,l.filterParams.byPage]])]),e("div",be,[pe,L(e("select",{class:"form-select form-filter","onUpdate:modelValue":o[2]||(o[2]=t=>l.filterParams.byStatus=t),onChange:o[3]||(o[3]=(...t)=>l.getBooks&&l.getBooks(...t))},[ye,(a(!0),n(x,null,w(s.value.status,t=>(a(),n("option",{value:t.id},i(t.name),9,ge))),256))],544),[[A,l.filterParams.byStatus]])]),e("div",he,[fe,L(e("select",{class:"form-select form-filter","onUpdate:modelValue":o[4]||(o[4]=t=>l.filterParams.byType=t),onChange:o[5]||(o[5]=(...t)=>l.getBooks&&l.getBooks(...t)),required:""},[$e,(a(!0),n(x,null,w(s.value.types,t=>(a(),n("option",{value:t.id},i(t.name),9,ke))),256))],544),[[A,l.filterParams.byType]])]),e("div",Ve,[xe,L(e("select",{class:"form-select form-filter","onUpdate:modelValue":o[6]||(o[6]=t=>l.filterParams.byListType=t),onChange:o[7]||(o[7]=(...t)=>l.getBooks&&l.getBooks(...t)),required:""},[we,(a(!0),n(x,null,w(s.value.list_types,t=>(a(),n("option",{value:t.id},i(t.name),9,Be))),256))],544),[[A,l.filterParams.byListType]])]),e("div",Te,[Pe,L(e("select",{class:"form-select form-filter","onUpdate:modelValue":o[8]||(o[8]=t=>l.filterParams.byLibrary=t),onChange:o[9]||(o[9]=(...t)=>l.getBooks&&l.getBooks(...t)),required:""},[Se,(a(!0),n(x,null,w(s.value.libraries,t=>(a(),n("option",{value:t.id},i(t.name),9,Ce))),256))],544),[[A,l.filterParams.byLibrary]])]),e("div",Ie,[L(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[10]||(o[10]=t=>l.filterParams.search=t),onInput:o[11]||(o[11]=(...t)=>l.getBooks&&l.getBooks(...t)),placeholder:"Kitap, Yazar"},null,544),[[ee,l.filterParams.search]]),Ke])])])]))}},Ue={key:0,class:"text-danger"},Ae=["value"],De=e("option",{value:null},"Filtreyi Temizle",-1),Fe=["value"],P={__name:"BaseSelect",props:{modelValue:{type:[String,Number,Boolean,Object,Array],default:null},label:{type:String,default:""},is_required:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},setup(l){return(m,d)=>(a(),n("div",null,[e("label",null,[j(i(l.label),1),l.is_required?(a(),n("span",Ue,"*")):F("",!0)]),e("select",{value:l.modelValue,class:"form-select",onChange:d[0]||(d[0]=s=>m.$emit("update:modelValue",s.target.value))},[De,(a(!0),n(x,null,w(l.options,s=>(a(),n("option",{value:s.id},i(s.name),9,Fe))),256))],40,Ae)]))}},ze={key:0},Ye=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),J={__name:"Alert",props:{type:{type:String,default:"danger"},message:{type:[Object,Array,String]}},setup(l){const m=l;return console.log(m.message),console.log(typeof m.message=="string"),(d,s)=>(a(),n("div",{class:D(["alert alert-dismissible fade show","alert-"+l.type]),role:"alert"},[typeof m.message=="string"?(a(),n("p",ze,i(l.message),1)):(a(!0),n(x,{key:1},w(l.message,c=>(a(),n("ul",null,[(a(!0),n(x,null,w(c,u=>(a(),n("li",null,i(u),1))),256))]))),256)),Ye],2))}};const Q=l=>(O("data-v-8fa86b78"),l=l(),E(),l),je={class:"card shadow"},qe={class:"card-body"},Oe={class:"row"},Ee={class:"mb-4 col-md-6"},Ne={class:"mb-4 col-md-6"},Me={class:"mb-4 col-md-6"},Ge={class:"mb-4 col-md-6"},Re={class:"mb-4 col-md-6"},He={class:"mb-4 col-md-6"},Ze={class:"mb-4 col-md-6"},Je={class:"mb-4 col-md-6"},Qe={class:"mb-4 col-md-6"},We={class:"mb-4 col-md-6"},Xe={key:0,class:"mt-4 d-flex gap-2 justify-content-end"},et=Q(()=>e("button",{type:"submit",class:"btn btn-dark"},"Kaydet",-1)),tt={key:1,class:"mt-4"},lt=Q(()=>e("button",{type:"submit",class:"btn btn-primary"},"Ekle",-1)),st=[lt],at={__name:"BookAdd",props:{getBooks:{type:Function,required:!0}},setup(l,{expose:m}){const d=l,{index:s,store:c,update:u,errors:o}=z(),t=f({}),h=f({}),b=f(""),$=()=>{s("types").then(g=>{h.value.types=g.data}),s("status").then(g=>{h.value.status=g.data}),s("list_types").then(g=>{h.value.list_types=g.data}),s("libraries").then(g=>{h.value.libraries=g.data})},I=()=>{o.value=null,b.value=null,c("books",t.value).then(g=>{g&&(g&&(b.value=t.value.name+" Kitabı Başarıyla Eklendi!"),t.value={},d.getBooks())})},S=()=>{u("books",t.value.id,t.value).then(g=>{g&&(g&&(b.value=t.value.name+" Kitabı Başarıyla Güncellendi!"),t.value={},d.getBooks())})},y=()=>{t.value={}};return m({book:t}),Y(()=>{$()}),(g,r)=>(a(),n("div",{class:D(["collapse my-2",{show:t.value.edit}]),id:"bookAdd"},[Z(o)?(a(),R(J,{key:0,message:Z(o)},null,8,["message"])):F("",!0),b.value?(a(),R(J,{key:1,message:b.value,type:"success"},null,8,["message"])):F("",!0),e("div",je,[e("div",qe,[e("form",{onSubmit:r[10]||(r[10]=te(_=>t.value.edit?S():I(),["prevent"]))},[e("div",Oe,[e("div",Ee,[v(U,{label:"Kitap Adı",modelValue:t.value.name,"onUpdate:modelValue":r[0]||(r[0]=_=>t.value.name=_)},null,8,["modelValue"])]),e("div",Ne,[v(U,{label:"Yazar Adı",modelValue:t.value.author,"onUpdate:modelValue":r[1]||(r[1]=_=>t.value.author=_)},null,8,["modelValue"])]),e("div",Me,[v(U,{label:"Yayın Evi",modelValue:t.value.publisher,"onUpdate:modelValue":r[2]||(r[2]=_=>t.value.publisher=_)},null,8,["modelValue"])]),e("div",Ge,[v(U,{type:"number",label:"Sayfa Sayısı",modelValue:t.value.page_count,"onUpdate:modelValue":r[3]||(r[3]=_=>t.value.page_count=_)},null,8,["modelValue"])]),e("div",Re,[v(U,{type:"date",label:"Satın Alma Tarihi",modelValue:t.value.buy_date,"onUpdate:modelValue":r[4]||(r[4]=_=>t.value.buy_date=_)},null,8,["modelValue"])]),e("div",He,[v(U,{type:"date",label:"Okunma Tarihi",modelValue:t.value.read_date,"onUpdate:modelValue":r[5]||(r[5]=_=>t.value.read_date=_)},null,8,["modelValue"])]),e("div",Ze,[v(P,{options:h.value.types,modelValue:t.value.type_id,"onUpdate:modelValue":r[6]||(r[6]=_=>t.value.type_id=_),label:"Kitap Türü"},null,8,["options","modelValue"])]),e("div",Je,[v(P,{options:h.value.list_types,modelValue:t.value.list_type_id,"onUpdate:modelValue":r[7]||(r[7]=_=>t.value.list_type_id=_),label:"Listeleneceği Yer"},null,8,["options","modelValue"])]),e("div",Qe,[v(P,{options:h.value.status,modelValue:t.value.status,"onUpdate:modelValue":r[8]||(r[8]=_=>t.value.status=_),label:"Durum"},null,8,["options","modelValue"])]),e("div",We,[v(P,{options:h.value.libraries,modelValue:t.value.in_library,"onUpdate:modelValue":r[9]||(r[9]=_=>t.value.in_library=_),label:"Kütüphanede"},null,8,["options","modelValue"])]),t.value.edit?(a(),n("div",Xe,[e("button",{onClick:y,class:"btn btn-danger"},"Vazgeç"),et])):(a(),n("div",tt,st))])],32)])])],2))}},ot=q(at,[["__scopeId","data-v-8fa86b78"]]);const N=l=>(O("data-v-46330891"),l=l(),E(),l),nt={"aria-label":"Page navigation",class:"d-flex gap-3 align-items-baseline mt-3"},it={class:"pagination"},dt=N(()=>e("i",{class:"fa-solid fa-angle-left"},null,-1)),ut=[dt],rt=["onClick"],ct=N(()=>e("i",{class:"fa-solid fa-angle-right"},null,-1)),mt=[ct],_t=N(()=>e("strong",null,"Toplam Kayıt:",-1)),vt={__name:"Pagination",props:{pageInfo:{type:Object},getData:{type:Function}},setup(l){const m=l;return m.pageInfo.current_page=m.pageInfo.current_page??1,(d,s)=>(a(),n("nav",nt,[e("ul",it,[e("li",{class:D(["page-item",{disabled:l.pageInfo.current_page===1}])},[e("a",{role:"button",class:"page-link",onClick:s[0]||(s[0]=c=>l.getData(l.pageInfo.current_page-1))},ut)],2),(a(!0),n(x,null,w(l.pageInfo.last_page,c=>(a(),n("li",{class:D(["page-item d-none d-md-block",{active:c===l.pageInfo.current_page}]),key:c},[e("a",{role:"button",class:"page-link",onClick:u=>l.getData(c)},i(c),9,rt)],2))),128)),e("li",{class:D(["page-item",{disabled:l.pageInfo.current_page===l.pageInfo.last_page}])},[e("a",{role:"button",class:"page-link",onClick:s[1]||(s[1]=c=>l.getData(l.pageInfo.current_page+1))},mt)],2)]),e("small",null,[_t,j(" "+i(l.pageInfo.total),1)])]))}},bt=q(vt,[["__scopeId","data-v-46330891"]]),pt={class:"collapse my-2",id:"getDraw"},yt={class:"card"},gt=e("div",{class:"card-header text-center"},[e("h1",null,"Kura Yapmak istediklerini seç")],-1),ht={class:"card-body"},ft={class:"row"},$t={class:"col-md-4"},kt={class:"mb-4"},Vt={class:"mb-4"},xt={class:"mb-4"},wt={class:"mb-4"},Bt={class:"col-md-8"},Tt={key:0,class:"card"},Pt=e("div",{class:"card-header"},[e("h3",{class:"text-center"},"Seçilen Kitap")],-1),St={class:"card-body"},Ct={key:0,class:"d-flex justify-content-center align-items-center",style:{height:"30vh"}},It=e("div",{class:"spinner-border",role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1),Kt=[It],Lt={key:1,class:"text-center"},Ut={__name:"Draw",setup(l){const{index:m}=z(),d=f({}),s=f({}),c=f(!1),u=f({}),o=()=>{c.value=!0,m("draw",d.value).then(b=>{b&&(u.value=b.data,c.value=!1)})},t=()=>{d.value={},u.value={},c.value=!1},h=()=>{m("types").then(b=>{s.value.types=b.data}),m("status").then(b=>{s.value.status=b.data}),m("list_types").then(b=>{s.value.list_types=b.data}),m("libraries").then(b=>{s.value.libraries=b.data})};return Y(()=>{h()}),(b,$)=>{var I,S;return a(),n("div",pt,[e("div",yt,[gt,e("div",ht,[e("div",ft,[e("div",$t,[e("div",kt,[v(P,{options:s.value.types,modelValue:d.value.byType,"onUpdate:modelValue":$[0]||($[0]=y=>d.value.byType=y),label:"Kitap Türü"},null,8,["options","modelValue"])]),e("div",Vt,[v(P,{options:s.value.list_types,modelValue:d.value.byListType,"onUpdate:modelValue":$[1]||($[1]=y=>d.value.byListType=y),label:"Listeleneceği Yer"},null,8,["options","modelValue"])]),e("div",xt,[v(P,{options:s.value.status,modelValue:d.value.byStatus,"onUpdate:modelValue":$[2]||($[2]=y=>d.value.byStatus=y),label:"Durum"},null,8,["options","modelValue"])]),e("div",wt,[v(P,{options:s.value.libraries,modelValue:d.value.byLibrary,"onUpdate:modelValue":$[3]||($[3]=y=>d.value.byLibrary=y),label:"Kütüphanede"},null,8,["options","modelValue"])]),e("button",{class:"btn btn-dark py-2 my-1 col-12",onClick:o},"Kura Çek"),c.value?(a(),n("button",{key:0,class:"btn btn-danger py-2 my-1 col-12",onClick:t},"Sıfırla")):F("",!0)]),e("div",Bt,[c.value||u.value.name?(a(),n("div",Tt,[Pt,e("div",St,[c.value?(a(),n("div",Ct,Kt)):(a(),n("div",Lt,[e("h1",null,i(u.value.name),1),e("h3",null,i(u.value.author),1),e("h5",null,i(u.value.type.name)+" - "+i((I=u.value.list_type)==null?void 0:I.name)+" - "+i((S=u.value.status)==null?void 0:S.name),1)]))])])):F("",!0)])])])])])}}};const k=l=>(O("data-v-8f7e75c4"),l=l(),E(),l),At={class:"card"},Dt=k(()=>e("div",{class:"card-header"},null,-1)),Ft={class:"card-body"},zt={class:"d-flex flex-column flex-sm-row gap-2 mb-4"},Yt=k(()=>e("a",{class:"btn btn-outline-info px-5","data-bs-toggle":"collapse",href:"#bookAdd",role:"button"}," Kitap Ekle ",-1)),jt=k(()=>e("button",{class:"btn btn-outline-warning col-12 px-5"},"Kitap Türleri",-1)),qt=k(()=>e("a",{class:"btn btn-outline-success px-5","data-bs-toggle":"collapse",href:"#getDraw",role:"button"}," Kura ",-1)),Ot=k(()=>e("button",{class:"btn btn-outline-primary col-12 px-5"},"Veriler",-1)),Et={class:"mt-3"},Nt=k(()=>e("strong",null,"Toplam Kayıt:",-1)),Mt={key:0,class:"d-flex justify-content-center align-items-center",style:{height:"70vh"}},Gt=k(()=>e("div",{class:"spinner-border",role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1)),Rt=[Gt],Ht={key:1,class:"table-responsive"},Zt={class:"table table-striped table-hover"},Jt=["onClick"],Qt={class:"d-flex gap-1"},Wt=k(()=>e("span",null,[e("i",{role:"button",class:"fa-solid fa-sort fa-xs"})],-1)),Xt=k(()=>e("th",{scope:"col",class:"text-center"},"İşlem",-1)),el={width:"300"},tl={width:"250"},ll={width:"200"},sl={class:"d-flex gap-2"},al=["onClick"],ol=k(()=>e("i",{class:"fa-regular fa-pen-to-square"},null,-1)),nl=[ol],il=["onClick"],dl=k(()=>e("i",{class:"fa-solid fa-trash-can"},null,-1)),ul=[dl],rl={__name:"Books",setup(l){const m=f(null),d=f({}),s=f({}),c=f(!1),u=f(),o=f({}),t={id:"ID",name:"Kitap",type:"Tür",author:"Yazar",publisher:"Yayıncı",page_count:"Sayfa",buy_date:"Satın Alma",read_date:"Okunma",list_type:"Listelenecek Yer",status:"Durum",in_library:"Kütüphanede"},h=f({row:"id",type:"asc"}),{index:b,show:$,destroy:I}=z(),S=le(),y=()=>{c.value=!0;const V={page:o.value.currentPage,byPage:s.value.byPage,byType:s.value.byType,byListType:s.value.byListType,byStatus:s.value.byStatus,byLibrary:s.value.byLibrary,search:s.value.search,orderBy:h.value.row,orderType:h.value.type};b("books",V).then(C=>{m.value=C.data,c.value=!1,o.value=C.meta})},g=V=>{o.value.currentPage=V,y()},r=V=>{h.value={row:V,type:h.value.type=="asc"?"desc":"asc"},y()},_=V=>{$("books",V).then(C=>{var T,K;let B=C.data;const p={...B,status:(T=B.status)==null?void 0:T.id,list_type_id:B.list_type.id,in_library:(K=B.in_library)==null?void 0:K.id,type_id:B.list_type.id,edit:!0};u.value.book=p,window.scrollTo(0,0)})},W=V=>{confirm("Silmek istediğine emin misin?")&&I("books",V).then(C=>{C&&y()})};return Y(()=>{S.params.id&&(s.value.byListType=S.params.id),y()}),(V,C)=>{const B=se("router-link");return a(),n("div",At,[Dt,e("div",Ft,[e("div",zt,[Yt,v(B,{to:"/types"},{default:H(()=>[jt]),_:1}),qt,v(B,{to:"/chart"},{default:H(()=>[Ot]),_:1})]),v(ot,{"get-books":y,ref_key:"bookAddComp",ref:u,"edit-book":d.value},null,8,["edit-book"]),v(Ut),v(Le,{"get-books":y,"filter-params":s.value},null,8,["filter-params"]),e("div",Et,[e("small",null,[Nt,j(" "+i(o.value.total),1)])]),c.value?(a(),n("div",Mt,Rt)):(a(),n("div",Ht,[e("table",Zt,[e("thead",null,[e("tr",null,[(a(),n(x,null,w(t,(p,T)=>e("th",{key:T,scope:"col",onClick:K=>r(T),role:"button"},[e("div",Qt,[Wt,e("span",null,i(p),1)])],8,Jt)),64)),Xt])]),e("tbody",null,[(a(!0),n(x,null,w(m.value,p=>{var T,K,M,G;return a(),n("tr",null,[e("th",null,i(p.id),1),e("td",el,i(p.name),1),e("td",tl,i((T=p.type)==null?void 0:T.name),1),e("td",ll,i(p.author),1),e("td",null,i(p.publisher),1),e("td",null,i(p.page_count),1),e("td",null,i(p.buy_date),1),e("td",null,i(p.read_date),1),e("td",null,i((K=p.list_type)==null?void 0:K.name),1),e("td",null,i((M=p.status)==null?void 0:M.name),1),e("td",null,i((G=p.in_library)==null?void 0:G.name),1),e("td",null,[e("div",sl,[e("button",{class:"btn btn-outline-dark",onClick:X=>_(p.id)},nl,8,al),e("button",{class:"btn btn-outline-danger",onClick:X=>W(p.id)},ul,8,il)])])])}),256))])])])),v(bt,{"page-info":o.value,"get-data":g},null,8,["page-info"])])])}}},bl=q(rl,[["__scopeId","data-v-8f7e75c4"]]);export{bl as default};
