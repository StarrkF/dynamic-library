import{u as U}from"./config-6fb72c73.js";import{e as C,o,c as n,a as e,f as B,v as x,F as f,g as k,h as E,i as P,j as w,m as N,_ as O,k as z,l as M,d as p,p as G,b as R,u as Z}from"./app-7bdc9bec.js";import{_,$ as m,n as j,Z as I}from"./reactivity.esm-bundler-ec77e152.js";const H={class:"card"},J=e("div",{class:"card-header"},"Filtreler",-1),Q={class:"card-body"},W={class:"d-flex flex-column flex-md-row gap-4 align-items-end"},X=e("div",{class:"mb-4 w-100"},[e("label",{for:"perPage"},"Listele"),e("select",{id:"perPage",class:"form-select form-filter",required:""},[e("option",null,"25"),e("option",{selected:""},"50"),e("option",null,"100"),e("option",null,"200")])],-1),ee={class:"mb-4 w-100"},te=e("label",null,"Durum",-1),le=e("option",{value:""},"Filtreyi Temizle",-1),se=["value"],ae={class:"mb-4 w-100"},oe=e("label",null,"Kitap Türü",-1),ne=e("option",{value:""},"Filtreyi Temizle",-1),ie=["value"],de={class:"mb-4 w-100"},ue=e("label",null,"Listelenecek Yer",-1),re=e("option",{value:""},"Filtreyi Temizle",-1),ce=["value"],me={class:"mb-4 w-100"},ve=e("label",null,"Kütüphanede",-1),be=e("option",{value:""},"Filtreyi Temizle",-1),pe=["value"],ye={class:"mb-4 w-100 input-group mb-4"},_e=e("button",{class:"btn btn-outline-dark",type:"button"},[e("i",{class:"fa-solid fa-magnifying-glass"})],-1),fe={__name:"Filters",props:{getBooks:{type:Function},filterParams:{type:Object}},setup(t){const{index:v}=U(),c=_({}),r=()=>{v("type").then(b=>{c.value.types=b}),v("status").then(b=>{c.value.status=b.data}),v("list_types").then(b=>{c.value.list_types=b.data}),v("libraries").then(b=>{c.value.libraries=b.data})};return C(()=>{r()}),(b,i)=>(o(),n("div",H,[J,e("div",Q,[e("div",W,[X,e("div",ee,[te,B(e("select",{class:"form-select form-filter","onUpdate:modelValue":i[0]||(i[0]=s=>t.filterParams.byStatus=s),onChange:i[1]||(i[1]=(...s)=>t.getBooks&&t.getBooks(...s)),required:""},[le,(o(!0),n(f,null,k(c.value.status,s=>(o(),n("option",{value:s.id},m(s.name),9,se))),256))],544),[[x,t.filterParams.byStatus]])]),e("div",ae,[oe,B(e("select",{class:"form-select form-filter","onUpdate:modelValue":i[2]||(i[2]=s=>t.filterParams.byType=s),onChange:i[3]||(i[3]=(...s)=>t.getBooks&&t.getBooks(...s)),required:""},[ne,(o(!0),n(f,null,k(c.value.types,s=>(o(),n("option",{value:s.id},m(s.name),9,ie))),256))],544),[[x,t.filterParams.byType]])]),e("div",de,[ue,B(e("select",{class:"form-select form-filter","onUpdate:modelValue":i[4]||(i[4]=s=>t.filterParams.byListType=s),onChange:i[5]||(i[5]=(...s)=>t.getBooks&&t.getBooks(...s)),required:""},[re,(o(!0),n(f,null,k(c.value.list_types,s=>(o(),n("option",{value:s.id},m(s.name),9,ce))),256))],544),[[x,t.filterParams.byListType]])]),e("div",me,[ve,B(e("select",{class:"form-select form-filter","onUpdate:modelValue":i[6]||(i[6]=s=>t.filterParams.byLibrary=s),onChange:i[7]||(i[7]=(...s)=>t.getBooks&&t.getBooks(...s)),required:""},[be,(o(!0),n(f,null,k(c.value.libraries,s=>(o(),n("option",{value:s.id},m(s.name),9,pe))),256))],544),[[x,t.filterParams.byLibrary]])]),e("div",ye,[B(e("input",{type:"text",class:"form-control","onUpdate:modelValue":i[8]||(i[8]=s=>t.filterParams.search=s),onInput:i[9]||(i[9]=(...s)=>t.getBooks&&t.getBooks(...s)),placeholder:"Kitap, Yazar"},null,544),[[E,t.filterParams.search]]),_e])])])]))}},he={key:0,class:"text-danger"},ge=["placeholder","required","value"],V={__name:"BaseInput",props:{modelValue:{type:String,default:""},label:{type:String,default:""},is_required:{type:Boolean,default:!1}},setup(t){return(v,c)=>(o(),n(f,null,[e("label",null,[P(m(t.label),1),t.is_required?(o(),n("span",he,"*")):w("",!0)]),e("input",N({type:"text",class:"form-control",placeholder:t.label,required:t.is_required,value:t.modelValue,onInput:c[0]||(c[0]=r=>v.$emit("update:modelValue",r.target.value))},v.$attrs),null,16,ge)],64))}},ke={key:0,class:"text-danger"},$e=["value"],Ve=e("option",{value:null},"Filtreyi Temizle",-1),Be=["value"],S={__name:"BaseSelect",props:{modelValue:{type:[String,Number,Boolean,Object,Array],default:null},label:{type:String,default:""},is_required:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},setup(t){return(v,c)=>(o(),n("div",null,[e("label",null,[P(m(t.label),1),t.is_required?(o(),n("span",ke,"*")):w("",!0)]),e("select",{value:t.modelValue,class:"form-select",onChange:c[0]||(c[0]=r=>v.$emit("update:modelValue",r.target.value))},[Ve,(o(!0),n(f,null,k(t.options,r=>(o(),n("option",{value:r.id},m(r.name),9,Be))),256))],40,$e)]))}},xe={key:0},Se=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),Y={__name:"Alert",props:{type:{type:String,default:"danger"},message:{type:[Object,Array,String]}},setup(t){const v=t;return console.log(v.message),console.log(typeof v.message=="string"),(c,r)=>(o(),n("div",{class:j(["alert alert-dismissible fade show","alert-"+t.type]),role:"alert"},[typeof v.message=="string"?(o(),n("p",xe,m(t.message),1)):(o(!0),n(f,{key:1},k(t.message,b=>(o(),n("ul",null,[(o(!0),n(f,null,k(b,i=>(o(),n("li",null,m(i),1))),256))]))),256)),Se],2))}};const q=t=>(G("data-v-c6b8be8e"),t=t(),R(),t),we=q(()=>e("a",{class:"btn btn-outline-info px-5","data-bs-toggle":"collapse",href:"#bookAdd",role:"button"}," Kitap Ekle ",-1)),Te={class:"card shadow"},Ae={class:"card-body"},Ue={class:"row"},Ce={class:"mb-4 col-md-6"},Pe={class:"mb-4 col-md-6"},qe={class:"mb-4 col-md-6"},Le={class:"mb-4 col-md-6"},Fe={class:"mb-4 col-md-6"},Ke={class:"mb-4 col-md-6"},ze={class:"mb-4 col-md-6"},Ie={class:"mb-4 col-md-6"},Ye={class:"mb-4 col-md-6"},je={class:"mb-4 col-md-6"},De={key:0,class:"mt-4 d-flex gap-2 justify-content-end"},Ee=q(()=>e("button",{type:"submit",class:"btn btn-dark"},"Kaydet",-1)),Ne={key:1,class:"mt-4"},Oe=q(()=>e("button",{type:"submit",class:"btn btn-primary"},"Ekle",-1)),Me=[Oe],Ge={__name:"BookAdd",props:{getBooks:{type:Function,required:!0}},setup(t,{expose:v}){const c=t,{index:r,store:b,update:i,errors:s}=U(),a=_({}),y=_({}),h=_(""),$=()=>{r("type").then(d=>{y.value.types=d}),r("status").then(d=>{y.value.status=d.data}),r("list_types").then(d=>{y.value.list_types=d.data}),r("libraries").then(d=>{y.value.libraries=d.data})},T=()=>{s.value=null,h.value=null,b("books",a.value).then(d=>{d&&(d&&(h.value=a.value.name+" Kitabı Başarıyla Eklendi!"),a.value={},c.getBooks())})},A=()=>{i("books",a.value.id,a.value).then(d=>{d&&(d&&(h.value=a.value.name+" Kitabı Başarıyla Güncellendi!"),a.value={},c.getBooks())})},g=()=>{a.value={}};return v({book:a}),C(()=>{$()}),(d,l)=>(o(),n("div",null,[we,e("div",{class:j(["collapse mt-2",{show:a.value.edit}]),id:"bookAdd"},[I(s)?(o(),z(Y,{key:0,message:I(s)},null,8,["message"])):w("",!0),h.value?(o(),z(Y,{key:1,message:h.value,type:"success"},null,8,["message"])):w("",!0),e("div",Te,[e("div",Ae,[e("form",{onSubmit:l[10]||(l[10]=M(u=>a.value.edit?A():T(),["prevent"]))},[e("div",Ue,[e("div",Ce,[p(V,{label:"Kitap Adı",modelValue:a.value.name,"onUpdate:modelValue":l[0]||(l[0]=u=>a.value.name=u)},null,8,["modelValue"])]),e("div",Pe,[p(V,{label:"Yazar Adı",modelValue:a.value.author,"onUpdate:modelValue":l[1]||(l[1]=u=>a.value.author=u)},null,8,["modelValue"])]),e("div",qe,[p(V,{label:"Yayın Evi",modelValue:a.value.publisher,"onUpdate:modelValue":l[2]||(l[2]=u=>a.value.publisher=u)},null,8,["modelValue"])]),e("div",Le,[p(V,{type:"number",label:"Sayfa Sayısı",modelValue:a.value.page_count,"onUpdate:modelValue":l[3]||(l[3]=u=>a.value.page_count=u)},null,8,["modelValue"])]),e("div",Fe,[p(V,{type:"date",label:"Satın Alma Tarihi",modelValue:a.value.buy_date,"onUpdate:modelValue":l[4]||(l[4]=u=>a.value.buy_date=u)},null,8,["modelValue"])]),e("div",Ke,[p(V,{type:"date",label:"Okunma Tarihi",modelValue:a.value.read_date,"onUpdate:modelValue":l[5]||(l[5]=u=>a.value.read_date=u)},null,8,["modelValue"])]),e("div",ze,[p(S,{options:y.value.types,modelValue:a.value.type_id,"onUpdate:modelValue":l[6]||(l[6]=u=>a.value.type_id=u),label:"Kitap Türü"},null,8,["options","modelValue"])]),e("div",Ie,[p(S,{options:y.value.list_types,modelValue:a.value.list_type_id,"onUpdate:modelValue":l[7]||(l[7]=u=>a.value.list_type_id=u),label:"Listeleneceği Yer"},null,8,["options","modelValue"])]),e("div",Ye,[p(S,{options:y.value.status,modelValue:a.value.status,"onUpdate:modelValue":l[8]||(l[8]=u=>a.value.status=u),label:"Durum"},null,8,["options","modelValue"])]),e("div",je,[p(S,{options:y.value.libraries,modelValue:a.value.in_library,"onUpdate:modelValue":l[9]||(l[9]=u=>a.value.in_library=u),label:"Kütüphanede"},null,8,["options","modelValue"])]),a.value.edit?(o(),n("div",De,[e("button",{onClick:g,class:"btn btn-danger"},"Vazgeç"),Ee])):(o(),n("div",Ne,Me))])],32)])])],2)]))}},Re=O(Ge,[["__scopeId","data-v-c6b8be8e"]]),Ze={class:"card"},He=e("div",{class:"card-header"},null,-1),Je={class:"card-body"},Qe={class:"d-flex justify-content-between mb-4"},We={key:0,class:"d-flex justify-content-center align-items-center",style:{height:"70vh"}},Xe=e("div",{class:"spinner-border",role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1),et=[Xe],tt={key:1,class:"table-responsive"},lt={class:"table table-striped table-hover"},st=e("thead",null,[e("tr",null,[e("th",{scope:"col"},[e("i",{role:"button",id:"asc",class:"orderBy fa-solid fa-arrow-up fa-xs"}),e("i",{role:"button",id:"desc",class:"orderBy fa-solid fa-arrow-down fa-xs"}),P(" ID ")]),e("th",{scope:"col"},"Kitap"),e("th",{scope:"col"},"Yazar"),e("th",{scope:"col"},"Yayıncı"),e("th",{scope:"col"},"Sayfa"),e("th",{scope:"col"},"Tür"),e("th",{scope:"col"},"Satın Alma"),e("th",{scope:"col"},"Okunma"),e("th",{scope:"col"},"Listelenecek Yer"),e("th",{scope:"col"},"Durum"),e("th",{scope:"col"},"Kütüphanede"),e("th",{scope:"col",class:"text-center"},"İşlem")])],-1),at={class:"d-flex gap-2"},ot=["onClick"],nt=e("i",{class:"fa-regular fa-pen-to-square"},null,-1),it=[nt],dt=["onClick"],ut=e("i",{class:"fa-solid fa-trash-can"},null,-1),rt=[ut],bt={__name:"Books",setup(t){const v=_(null),c=_({}),r=_({}),b=_(!1),i=_(),{index:s,show:a,destroy:y}=U(),h=Z(),$=()=>{b.value=!0,s("books",r.value.byType,r.value.byListType,r.value.byStatus,r.value.byLibrary,r.value.search).then(g=>{v.value=g.data,b.value=!1})},T=g=>{a("books",g).then(d=>{const l={...d.data,status:d.data.status.id,list_type_id:d.data.list_type.id,in_library:d.data.in_library.id,type_id:d.data.list_type.id,edit:!0};i.value.book=l,window.scrollTo(0,0)})},A=g=>{confirm("Silmek istediğine emin misin?")&&y("books",g).then(d=>{d&&$()})};return C(()=>{h.params.id&&(r.value.byListType=h.params.id),$()}),(g,d)=>(o(),n("div",Ze,[He,e("div",Je,[e("div",Qe,[p(Re,{"get-books":$,ref_key:"bookAddComp",ref:i,"edit-book":c.value},null,8,["edit-book"])]),p(fe,{"get-books":$,"filter-params":r.value},null,8,["filter-params"]),b.value?(o(),n("div",We,et)):(o(),n("div",tt,[e("table",lt,[st,e("tbody",null,[(o(!0),n(f,null,k(v.value,l=>{var u,L,F,K;return o(),n("tr",null,[e("th",null,m(l.id),1),e("td",null,m(l.name),1),e("td",null,[e("a",null,m(l.author),1)]),e("td",null,m(l.publisher),1),e("td",null,m(l.page_count),1),e("td",null,m((u=l.type)==null?void 0:u.name),1),e("td",null,m(l.buy_date),1),e("td",null,m(l.read_date),1),e("td",null,m((L=l.list_type)==null?void 0:L.name),1),e("td",null,m((F=l.status)==null?void 0:F.name),1),e("td",null,m((K=l.in_library)==null?void 0:K.name),1),e("td",null,[e("div",at,[e("button",{class:"btn btn-outline-dark",onClick:D=>T(l.id)},it,8,ot),e("button",{class:"btn btn-outline-danger",onClick:D=>A(l.id)},rt,8,dt)])])])}),256))])])]))])]))}};export{bt as default};
