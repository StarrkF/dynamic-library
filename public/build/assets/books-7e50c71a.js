function p(){const t=async e=>await axios.get(e).then(function(n){return n.data}).catch(function(n){n.message}),o=async(e,n)=>await axios.get(e+"/"+n).then(function(a){return a.data}).catch(function(a){return a.message}),m=async(e,n)=>await axios.post(e,n).then(function(a){return a.data}).catch(function(a){return a.message}),y=async(e,n,a)=>await axios.put(e+"/"+n,a).then(function(r){return r.data}).catch(function(r){return r.message}),g=async(e,n)=>await axios.delete(e+"/"+n).then(function(a){return a.data}).catch(function(a){return a.message});function w(e,n){const a=[];for(let r=0;r<n;r++){const c=`#${[e[0]+Math.floor(Math.random()*50)-25,e[1]+Math.floor(Math.random()*50)-25,e[2]+Math.floor(Math.random()*50)-25].map(s=>Math.max(0,Math.min(255,s)).toString(16).padStart(2,"0")).join("")}`;a.push(c)}return a}function M(e){const n=[];for(let a=0;a<e;a++){const r=[Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)],c=`#${[r[0]+Math.floor(Math.random()*50)-25,r[1]+Math.floor(Math.random()*50)-25,r[2]+Math.floor(Math.random()*50)-25].map(s=>Math.max(0,Math.min(255,s)).toString(16).padStart(2,"0")).join("")}`;n.push(c)}return n}function x(e,n){const a=[];for(const r of e){let i=parseInt(r.slice(1,3),16),c=parseInt(r.slice(3,5),16),s=parseInt(r.slice(5),16);i=Math.max(0,i-n),c=Math.max(0,c-n),s=Math.max(0,s-n);const b=`#${i.toString(16)}${c.toString(16)}${s.toString(16)}`;a.push(b)}return a}return{index:t,show:o,store:m,update:y,destroy:g,colorPallete:w,darkerColors:x,randomColor:M}}const{index:k,show:E,store:F,update:K,destroy:O,colorPallete:W,darkerColors:v,randomColor:S}=p(),d={},C=async()=>{let t=await k("/chart");d.value=t,B()};C();const u={},T=$(window).width()>=768,P={scales:{y:{beginAtZero:!0},x:{ticks:{display:!!T,maxRotation:40,minRotation:40,autoSkip:!1},barPercentage:.8,categoryPercentage:.9}},responsive:!0,maintainAspectRatio:!1};function B(){u.labels=d.value.map(o=>o.name);const t=S(d.value.length);v(t,20),u.datasets=[{label:"Tür / Kitap Sayısı",data:d.value.map(o=>o.books_count),backgroundColor:t,borderColor:"#000",borderWidth:1}]}var _=document.getElementById("myChart");new Chart(_,{type:"bar",data:u,options:P});const{index:I,show:R,update:j}=p(),l=new URL(window.location.href),f=[];U(["byType","byStatus","byLibrary","byListType","search","perPage"]);$(".form-filter").change(function(){h(this.id,this.value)});$("#searchButton").click(function(){h("search",$("#search").val())});$(document).on("click",".orderBy",function(){h("orderBy",this.id)});$("#search").on("keydown",function(t){t.key==="Enter"&&$("#searchButton").trigger("click")});$(".clearUrl").click(function(){window.location.href=window.location.origin+window.location.pathname});$(document).on("click","#editType",function(){$(".storeType").attr("hidden",!0),$(".updateType").attr("hidden",!1),$(".updateType").attr("data-typeid",$(this).data("typeid")),A($(this).data("typeid"))});$(document).on("click",".updateType",function(){L($(this).data("typeid")),location.reload()});$(document).on("change",".draw-select",function(){var t=this.id.replace("draw_","");f[t]=this.value});$(document).on("click","#getDraw",function(){D().then(t=>{$(".card-result").attr("hidden",!1),$(".card-result h2").text(t.name),$(".card-result h4").text(t.author),$(".draw-select").val("")})});async function A(t){const o=await R("/type",t);$("#type_name").val(o.name)}async function D(){var t=Object.assign({},f);return(await I("/draw?"+$.param(t))).data}async function L(t){await j("/type",t,{name:$("#type_name").val()})}function h(t,o){t&&l.searchParams.set(t,o),window.location.href=l.toString()}function U(t){t.map(o=>{l.searchParams.get(o)&&$("#"+o).val(l.searchParams.get(o))})}
