import{u as Y}from"./config-df2164b1.js";import{e as z,o,c as n,a as e,f as L,v as A,F as w,g as B,h as ee,_ as j,i as G,j as F,k as te,d as v,p as O,b as q,l as J,u as se,r as le,w as R}from"./app-51e1db9d.js";import{_ as f,$ as i,n as D,Z as H}from"./reactivity.esm-bundler-9db843ea.js";import{_ as U}from"./BaseInput-b2da0c75.js";import{_ as S}from"./BaseSelect-6250de75.js";const ae={class:"card"},oe=e("div",{class:"card-header"},"Filtreler",-1),ne={class:"card-body"},ie={class:"d-flex flex-column flex-md-row gap-4 align-items-end"},de={class:"mb-2 w-100"},ue=e("label",null,"Listele",-1),re=e("option",null,"25",-1),ce=e("option",null,"50",-1),me=e("option",null,"100",-1),_e=e("option",null,"250",-1),ve=[re,ce,me,_e],pe={class:"mb-2 w-100"},be=e("label",null,"Durum",-1),ye=e("option",{value:""},"Filtreyi Temizle",-1),ge=["value"],he={class:"mb-2 w-100"},fe=e("label",null,"Kitap Türü",-1),$e=e("option",{value:""},"Filtreyi Temizle",-1),ke=["value"],Ve={class:"mb-2 w-100"},xe=e("label",null,"Listelenecek Yer",-1),we=e("option",{value:""},"Filtreyi Temizle",-1),Be=["value"],Te={class:"mb-2 w-100"},Pe=e("label",null,"Kütüphanede",-1),Se=e("option",{value:""},"Filtreyi Temizle",-1),Ce=["value"],Ie={class:"mb-2 w-100 input-group mb-2"},Ke=e("button",{class:"btn btn-outline-dark",type:"button"},[e("i",{class:"fa-solid fa-magnifying-glass"})],-1),Le={__name:"Filters",props:{getBooks:{type:Function},filterParams:{type:Object}},setup(s){const _=s,{index:c}=Y(),l=f({}),r=()=>{c("types").then(d=>{l.value.types=d.data}),c("status").then(d=>{l.value.status=d.data}),c("list_types").then(d=>{l.value.list_types=d.data}),c("libraries").then(d=>{l.value.libraries=d.data})};return z(()=>{r()}),_.filterParams.byPage=_.filterParams.byPage??50,(d,a)=>(o(),n("div",ae,[oe,e("div",ne,[e("div",ie,[e("div",de,[ue,L(e("select",{class:"form-select form-filter","onUpdate:modelValue":a[0]||(a[0]=t=>s.filterParams.byPage=t),onChange:a[1]||(a[1]=(...t)=>s.getBooks&&s.getBooks(...t))},ve,544),[[A,s.filterParams.byPage]])]),e("div",pe,[be,L(e("select",{class:"form-select form-filter","onUpdate:modelValue":a[2]||(a[2]=t=>s.filterParams.byStatus=t),onChange:a[3]||(a[3]=(...t)=>s.getBooks&&s.getBooks(...t))},[ye,(o(!0),n(w,null,B(l.value.status,t=>(o(),n("option",{value:t.id},i(t.name),9,ge))),256))],544),[[A,s.filterParams.byStatus]])]),e("div",he,[fe,L(e("select",{class:"form-select form-filter","onUpdate:modelValue":a[4]||(a[4]=t=>s.filterParams.byType=t),onChange:a[5]||(a[5]=(...t)=>s.getBooks&&s.getBooks(...t)),required:""},[$e,(o(!0),n(w,null,B(l.value.types,t=>(o(),n("option",{value:t.id},i(t.name),9,ke))),256))],544),[[A,s.filterParams.byType]])]),e("div",Ve,[xe,L(e("select",{class:"form-select form-filter","onUpdate:modelValue":a[6]||(a[6]=t=>s.filterParams.byListType=t),onChange:a[7]||(a[7]=(...t)=>s.getBooks&&s.getBooks(...t)),required:""},[we,(o(!0),n(w,null,B(l.value.list_types,t=>(o(),n("option",{value:t.id},i(t.name),9,Be))),256))],544),[[A,s.filterParams.byListType]])]),e("div",Te,[Pe,L(e("select",{class:"form-select form-filter","onUpdate:modelValue":a[8]||(a[8]=t=>s.filterParams.byLibrary=t),onChange:a[9]||(a[9]=(...t)=>s.getBooks&&s.getBooks(...t)),required:""},[Se,(o(!0),n(w,null,B(l.value.libraries,t=>(o(),n("option",{value:t.id},i(t.name),9,Ce))),256))],544),[[A,s.filterParams.byLibrary]])]),e("div",Ie,[L(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[10]||(a[10]=t=>s.filterParams.search=t),onInput:a[11]||(a[11]=(...t)=>s.getBooks&&s.getBooks(...t)),placeholder:"Kitap, Yazar"},null,544),[[ee,s.filterParams.search]]),Ke])])])]))}},Ue={key:0},Ae=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),Z={__name:"Alert",props:{type:{type:String,default:"danger"},message:{type:[Object,Array,String]}},setup(s){const _=s;return console.log(_.message),console.log(typeof _.message=="string"),(c,l)=>(o(),n("div",{class:D(["alert alert-dismissible fade show","alert-"+s.type]),role:"alert"},[typeof _.message=="string"?(o(),n("p",Ue,i(s.message),1)):(o(!0),n(w,{key:1},B(s.message,r=>(o(),n("ul",null,[(o(!0),n(w,null,B(r,d=>(o(),n("li",null,i(d),1))),256))]))),256)),Ae],2))}};const Q=s=>(O("data-v-8fa86b78"),s=s(),q(),s),De={class:"card shadow"},Fe={class:"card-body"},Ye={class:"row"},ze={class:"mb-4 col-md-6"},je={class:"mb-4 col-md-6"},Oe={class:"mb-4 col-md-6"},qe={class:"mb-4 col-md-6"},Ee={class:"mb-4 col-md-6"},Me={class:"mb-4 col-md-6"},Ne={class:"mb-4 col-md-6"},Ge={class:"mb-4 col-md-6"},Re={class:"mb-4 col-md-6"},He={class:"mb-4 col-md-6"},Ze={key:0,class:"mt-4 d-flex gap-2 justify-content-end"},Je=Q(()=>e("button",{type:"submit",class:"btn btn-dark"},"Kaydet",-1)),Qe={key:1,class:"mt-4"},We=Q(()=>e("button",{type:"submit",class:"btn btn-primary"},"Ekle",-1)),Xe=[We],et={__name:"BookAdd",props:{getBooks:{type:Function,required:!0}},setup(s,{expose:_}){const c=s,{index:l,store:r,update:d,errors:a}=Y(),t=f({}),h=f({}),p=f(""),$=()=>{l("types").then(g=>{h.value.types=g.data}),l("status").then(g=>{h.value.status=g.data}),l("list_types").then(g=>{h.value.list_types=g.data}),l("libraries").then(g=>{h.value.libraries=g.data})},I=()=>{a.value=null,p.value=null,r("books",t.value).then(g=>{g&&(g&&(p.value=t.value.name+" Kitabı Başarıyla Eklendi!"),t.value={},c.getBooks())})},x=()=>{d("books",t.value.id,t.value).then(g=>{g&&(g&&(p.value=t.value.name+" Kitabı Başarıyla Güncellendi!"),t.value={},c.getBooks())})},y=()=>{t.value={}};return _({book:t}),z(()=>{$()}),(g,u)=>(o(),n("div",{class:D(["collapse my-2",{show:t.value.edit}]),id:"bookAdd"},[H(a)?(o(),G(Z,{key:0,message:H(a)},null,8,["message"])):F("",!0),p.value?(o(),G(Z,{key:1,message:p.value,type:"success"},null,8,["message"])):F("",!0),e("div",De,[e("div",Fe,[e("form",{onSubmit:u[10]||(u[10]=te(m=>t.value.edit?x():I(),["prevent"]))},[e("div",Ye,[e("div",ze,[v(U,{label:"Kitap Adı",modelValue:t.value.name,"onUpdate:modelValue":u[0]||(u[0]=m=>t.value.name=m)},null,8,["modelValue"])]),e("div",je,[v(U,{label:"Yazar Adı",modelValue:t.value.author,"onUpdate:modelValue":u[1]||(u[1]=m=>t.value.author=m)},null,8,["modelValue"])]),e("div",Oe,[v(U,{label:"Yayın Evi",modelValue:t.value.publisher,"onUpdate:modelValue":u[2]||(u[2]=m=>t.value.publisher=m)},null,8,["modelValue"])]),e("div",qe,[v(U,{type:"number",label:"Sayfa Sayısı",modelValue:t.value.page_count,"onUpdate:modelValue":u[3]||(u[3]=m=>t.value.page_count=m)},null,8,["modelValue"])]),e("div",Ee,[v(U,{type:"date",label:"Satın Alma Tarihi",modelValue:t.value.buy_date,"onUpdate:modelValue":u[4]||(u[4]=m=>t.value.buy_date=m)},null,8,["modelValue"])]),e("div",Me,[v(U,{type:"date",label:"Okunma Tarihi",modelValue:t.value.read_date,"onUpdate:modelValue":u[5]||(u[5]=m=>t.value.read_date=m)},null,8,["modelValue"])]),e("div",Ne,[v(S,{options:h.value.types,modelValue:t.value.type_id,"onUpdate:modelValue":u[6]||(u[6]=m=>t.value.type_id=m),label:"Kitap Türü"},null,8,["options","modelValue"])]),e("div",Ge,[v(S,{options:h.value.list_types,modelValue:t.value.list_type_id,"onUpdate:modelValue":u[7]||(u[7]=m=>t.value.list_type_id=m),label:"Listeleneceği Yer"},null,8,["options","modelValue"])]),e("div",Re,[v(S,{options:h.value.status,modelValue:t.value.status,"onUpdate:modelValue":u[8]||(u[8]=m=>t.value.status=m),label:"Durum"},null,8,["options","modelValue"])]),e("div",He,[v(S,{options:h.value.libraries,modelValue:t.value.in_library,"onUpdate:modelValue":u[9]||(u[9]=m=>t.value.in_library=m),label:"Kütüphanede"},null,8,["options","modelValue"])]),t.value.edit?(o(),n("div",Ze,[e("button",{onClick:y,class:"btn btn-danger"},"Vazgeç"),Je])):(o(),n("div",Qe,Xe))])],32)])])],2))}},tt=j(et,[["__scopeId","data-v-8fa86b78"]]);const E=s=>(O("data-v-46330891"),s=s(),q(),s),st={"aria-label":"Page navigation",class:"d-flex gap-3 align-items-baseline mt-3"},lt={class:"pagination"},at=E(()=>e("i",{class:"fa-solid fa-angle-left"},null,-1)),ot=[at],nt=["onClick"],it=E(()=>e("i",{class:"fa-solid fa-angle-right"},null,-1)),dt=[it],ut=E(()=>e("strong",null,"Toplam Kayıt:",-1)),rt={__name:"Pagination",props:{pageInfo:{type:Object},getData:{type:Function}},setup(s){const _=s;return _.pageInfo.current_page=_.pageInfo.current_page??1,(c,l)=>(o(),n("nav",st,[e("ul",lt,[e("li",{class:D(["page-item",{disabled:s.pageInfo.current_page===1}])},[e("a",{role:"button",class:"page-link",onClick:l[0]||(l[0]=r=>s.getData(s.pageInfo.current_page-1))},ot)],2),(o(!0),n(w,null,B(s.pageInfo.last_page,r=>(o(),n("li",{class:D(["page-item d-none d-md-block",{active:r===s.pageInfo.current_page}]),key:r},[e("a",{role:"button",class:"page-link",onClick:d=>s.getData(r)},i(r),9,nt)],2))),128)),e("li",{class:D(["page-item",{disabled:s.pageInfo.current_page===s.pageInfo.last_page}])},[e("a",{role:"button",class:"page-link",onClick:l[1]||(l[1]=r=>s.getData(s.pageInfo.current_page+1))},dt)],2)]),e("small",null,[ut,J(" "+i(s.pageInfo.total),1)])]))}},ct=j(rt,[["__scopeId","data-v-46330891"]]),mt={class:"collapse my-2",id:"getDraw"},_t={class:"card"},vt=e("div",{class:"card-header text-center"},[e("h1",null,"Kura Yapmak istediklerini seç")],-1),pt={class:"card-body"},bt={class:"row"},yt={class:"col-md-4"},gt={class:"mb-4"},ht={class:"mb-4"},ft={class:"mb-4"},$t={class:"mb-4"},kt={class:"col-md-8"},Vt={key:0,class:"card"},xt=e("div",{class:"card-header"},[e("h3",{class:"text-center"},"Seçilen Kitap")],-1),wt={class:"card-body"},Bt={key:0,class:"d-flex justify-content-center align-items-center",style:{height:"30vh"}},Tt=e("div",{class:"spinner-border",role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1),Pt=[Tt],St={key:1,class:"text-center"},Ct={__name:"Draw",setup(s){const{index:_}=Y(),c=f({}),l=f({}),r=f(!1),d=f({}),a=()=>{r.value=!0,_("draw",c.value).then(p=>{p&&(d.value=p.data,r.value=!1)})},t=()=>{c.value={},d.value={},r.value=!1},h=()=>{_("types").then(p=>{l.value.types=p.data}),_("status").then(p=>{l.value.status=p.data}),_("list_types").then(p=>{l.value.list_types=p.data}),_("libraries").then(p=>{l.value.libraries=p.data})};return z(()=>{h()}),(p,$)=>{var I,x;return o(),n("div",mt,[e("div",_t,[vt,e("div",pt,[e("div",bt,[e("div",yt,[e("div",gt,[v(S,{options:l.value.types,modelValue:c.value.byType,"onUpdate:modelValue":$[0]||($[0]=y=>c.value.byType=y),label:"Kitap Türü"},null,8,["options","modelValue"])]),e("div",ht,[v(S,{options:l.value.list_types,modelValue:c.value.byListType,"onUpdate:modelValue":$[1]||($[1]=y=>c.value.byListType=y),label:"Listeleneceği Yer"},null,8,["options","modelValue"])]),e("div",ft,[v(S,{options:l.value.status,modelValue:c.value.byStatus,"onUpdate:modelValue":$[2]||($[2]=y=>c.value.byStatus=y),label:"Durum"},null,8,["options","modelValue"])]),e("div",$t,[v(S,{options:l.value.libraries,modelValue:c.value.byLibrary,"onUpdate:modelValue":$[3]||($[3]=y=>c.value.byLibrary=y),label:"Kütüphanede"},null,8,["options","modelValue"])]),e("button",{class:"btn btn-dark py-2 my-1 col-12",onClick:a},"Kura Çek"),r.value?(o(),n("button",{key:0,class:"btn btn-danger py-2 my-1 col-12",onClick:t},"Sıfırla")):F("",!0)]),e("div",kt,[r.value||d.value.name?(o(),n("div",Vt,[xt,e("div",wt,[r.value?(o(),n("div",Bt,Pt)):(o(),n("div",St,[e("h1",null,i(d.value.name),1),e("h3",null,i(d.value.author),1),e("h5",null,i(d.value.type.name)+" - "+i((I=d.value.list_type)==null?void 0:I.name)+" - "+i((x=d.value.status)==null?void 0:x.name),1)]))])])):F("",!0)])])])])])}}};const k=s=>(O("data-v-e9cf9c19"),s=s(),q(),s),It={class:"card"},Kt=k(()=>e("div",{class:"card-header"},null,-1)),Lt={class:"card-body"},Ut={class:"d-flex flex-column flex-sm-row gap-2 mb-4"},At=k(()=>e("a",{class:"btn btn-outline-info px-5","data-bs-toggle":"collapse",href:"#bookAdd",role:"button"}," Kitap Ekle ",-1)),Dt=k(()=>e("button",{class:"btn btn-outline-warning col-12 px-5"},"Kitap Türleri",-1)),Ft=k(()=>e("a",{class:"btn btn-outline-success px-5","data-bs-toggle":"collapse",href:"#getDraw",role:"button"}," Kura ",-1)),Yt=k(()=>e("button",{class:"btn btn-outline-primary col-12 px-5"},"Veriler",-1)),zt={class:"mt-3"},jt=k(()=>e("strong",null,"Toplam Kayıt:",-1)),Ot={key:0,class:"d-flex justify-content-center align-items-center",style:{height:"70vh"}},qt=k(()=>e("div",{class:"spinner-border",role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1)),Et=[qt],Mt={key:1,class:"table-responsive"},Nt={class:"table table-striped table-hover"},Gt=["onClick"],Rt={class:"d-flex gap-1"},Ht=k(()=>e("span",null,[e("i",{role:"button",class:"fa-solid fa-sort fa-xs"})],-1)),Zt=k(()=>e("th",{scope:"col",class:"text-center"},"İşlem",-1)),Jt={width:"300"},Qt={width:"250"},Wt={width:"200"},Xt={class:"d-flex gap-2"},es=["onClick"],ts=k(()=>e("i",{class:"fa-regular fa-pen-to-square"},null,-1)),ss=[ts],ls=["onClick"],as=k(()=>e("i",{class:"fa-solid fa-trash-can"},null,-1)),os=[as],ns={__name:"Books",setup(s){const _=f(null),c=f({}),l=f({}),r=f(!1),d=f(),a=f({}),t={id:"ID",name:"Kitap",type:"Tür",author:"Yazar",publisher:"Yayıncı",page_count:"Sayfa",buy_date:"Satın Alma",read_date:"Okunma",list_type:"Listelenecek Yer",status:"Durum",in_library:"Kütüphanede"},h=f({row:"id",type:"asc"}),{index:p,show:$,destroy:I}=Y(),x=se(),y=()=>{r.value=!0;const V={page:a.value.currentPage,byPage:l.value.byPage,byType:l.value.byType,byListType:l.value.byListType,byStatus:l.value.byStatus,byLibrary:l.value.byLibrary,search:l.value.search,orderBy:h.value.row,orderType:h.value.type};p("books",V).then(C=>{_.value=C.data,r.value=!1,a.value=C.meta})},g=V=>{a.value.currentPage=V,y()},u=V=>{h.value={row:V,type:h.value.type=="asc"?"desc":"asc"},y()},m=V=>{$("books",V).then(C=>{var P,K;let T=C.data;const b={...T,status:(P=T.status)==null?void 0:P.id,list_type_id:T.list_type.id,in_library:(K=T.in_library)==null?void 0:K.id,type_id:T.list_type.id,edit:!0};d.value.book=b,window.scrollTo(0,0)})},W=V=>{confirm("Silmek istediğine emin misin?")&&I("books",V).then(C=>{C&&y()})};return z(()=>{x.params.id&&(l.value.byListType=x.params.id),x.params.type&&(l.value.byType=x.params.type),y()}),(V,C)=>{const T=le("router-link");return o(),n("div",It,[Kt,e("div",Lt,[e("div",Ut,[At,v(T,{to:"/types"},{default:R(()=>[Dt]),_:1}),Ft,v(T,{to:"/chart"},{default:R(()=>[Yt]),_:1})]),v(tt,{"get-books":y,ref_key:"bookAddComp",ref:d,"edit-book":c.value},null,8,["edit-book"]),v(Ct),v(Le,{"get-books":y,"filter-params":l.value},null,8,["filter-params"]),e("div",zt,[e("small",null,[jt,J(" "+i(a.value.total),1)])]),r.value?(o(),n("div",Ot,Et)):(o(),n("div",Mt,[e("table",Nt,[e("thead",null,[e("tr",null,[(o(),n(w,null,B(t,(b,P)=>e("th",{key:P,scope:"col",onClick:K=>u(P),role:"button"},[e("div",Rt,[Ht,e("span",null,i(b),1)])],8,Gt)),64)),Zt])]),e("tbody",null,[(o(!0),n(w,null,B(_.value,b=>{var P,K,M,N;return o(),n("tr",null,[e("th",null,i(b.id),1),e("td",Jt,i(b.name),1),e("td",Qt,i((P=b.type)==null?void 0:P.name),1),e("td",Wt,i(b.author),1),e("td",null,i(b.publisher),1),e("td",null,i(b.page_count),1),e("td",null,i(b.buy_date),1),e("td",null,i(b.read_date),1),e("td",null,i((K=b.list_type)==null?void 0:K.name),1),e("td",null,i((M=b.status)==null?void 0:M.name),1),e("td",null,i((N=b.in_library)==null?void 0:N.name),1),e("td",null,[e("div",Xt,[e("button",{class:"btn btn-outline-dark",onClick:X=>m(b.id)},ss,8,es),e("button",{class:"btn btn-outline-danger",onClick:X=>W(b.id)},os,8,ls)])])])}),256))])])])),v(ct,{"page-info":a.value,"get-data":g},null,8,["page-info"])])])}}},ms=j(ns,[["__scopeId","data-v-e9cf9c19"]]);export{ms as default};
