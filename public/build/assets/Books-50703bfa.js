import{u as z}from"./config-37966956.js";import{e as D,o as s,c as n,a as e,f as S,v as C,F as f,g as k,h as W,i as j,j as F,m as X,_ as Y,k as H,l as ee,d as y,p as O,b as E,u as te}from"./app-de17eb14.js";import{_ as g,$ as d,n as A,Z as R}from"./reactivity.esm-bundler-ec77e152.js";const le={class:"card"},ae=e("div",{class:"card-header"},"Filtreler",-1),se={class:"card-body"},oe={class:"d-flex flex-column flex-md-row gap-4 align-items-end"},ne={class:"mb-4 w-100"},ie=e("label",null,"Listele",-1),de=e("option",null,"25",-1),ue=e("option",null,"50",-1),re=e("option",null,"100",-1),ce=e("option",null,"250",-1),me=[de,ue,re,ce],ve={class:"mb-4 w-100"},be=e("label",null,"Durum",-1),pe=e("option",{value:""},"Filtreyi Temizle",-1),_e=["value"],ye={class:"mb-4 w-100"},ge=e("label",null,"Kitap Türü",-1),fe=e("option",{value:""},"Filtreyi Temizle",-1),he=["value"],ke={class:"mb-4 w-100"},$e=e("label",null,"Listelenecek Yer",-1),Ve=e("option",{value:""},"Filtreyi Temizle",-1),Be=["value"],xe={class:"mb-4 w-100"},Pe=e("label",null,"Kütüphanede",-1),Se=e("option",{value:""},"Filtreyi Temizle",-1),we=["value"],Ie={class:"mb-4 w-100 input-group mb-4"},Te=e("button",{class:"btn btn-outline-dark",type:"button"},[e("i",{class:"fa-solid fa-magnifying-glass"})],-1),Ce={__name:"Filters",props:{getBooks:{type:Function},filterParams:{type:Object}},setup(l){const c=l,{index:m}=z(),a=g({}),v=()=>{m("type").then(b=>{a.value.types=b}),m("status").then(b=>{a.value.status=b.data}),m("list_types").then(b=>{a.value.list_types=b.data}),m("libraries").then(b=>{a.value.libraries=b.data})};return D(()=>{v()}),c.filterParams.byPage=c.filterParams.byPage??50,(b,o)=>(s(),n("div",le,[ae,e("div",se,[e("div",oe,[e("div",ne,[ie,S(e("select",{class:"form-select form-filter","onUpdate:modelValue":o[0]||(o[0]=t=>l.filterParams.byPage=t),onChange:o[1]||(o[1]=(...t)=>l.getBooks&&l.getBooks(...t))},me,544),[[C,l.filterParams.byPage]])]),e("div",ve,[be,S(e("select",{class:"form-select form-filter","onUpdate:modelValue":o[2]||(o[2]=t=>l.filterParams.byStatus=t),onChange:o[3]||(o[3]=(...t)=>l.getBooks&&l.getBooks(...t))},[pe,(s(!0),n(f,null,k(a.value.status,t=>(s(),n("option",{value:t.id},d(t.name),9,_e))),256))],544),[[C,l.filterParams.byStatus]])]),e("div",ye,[ge,S(e("select",{class:"form-select form-filter","onUpdate:modelValue":o[4]||(o[4]=t=>l.filterParams.byType=t),onChange:o[5]||(o[5]=(...t)=>l.getBooks&&l.getBooks(...t)),required:""},[fe,(s(!0),n(f,null,k(a.value.types,t=>(s(),n("option",{value:t.id},d(t.name),9,he))),256))],544),[[C,l.filterParams.byType]])]),e("div",ke,[$e,S(e("select",{class:"form-select form-filter","onUpdate:modelValue":o[6]||(o[6]=t=>l.filterParams.byListType=t),onChange:o[7]||(o[7]=(...t)=>l.getBooks&&l.getBooks(...t)),required:""},[Ve,(s(!0),n(f,null,k(a.value.list_types,t=>(s(),n("option",{value:t.id},d(t.name),9,Be))),256))],544),[[C,l.filterParams.byListType]])]),e("div",xe,[Pe,S(e("select",{class:"form-select form-filter","onUpdate:modelValue":o[8]||(o[8]=t=>l.filterParams.byLibrary=t),onChange:o[9]||(o[9]=(...t)=>l.getBooks&&l.getBooks(...t)),required:""},[Se,(s(!0),n(f,null,k(a.value.libraries,t=>(s(),n("option",{value:t.id},d(t.name),9,we))),256))],544),[[C,l.filterParams.byLibrary]])]),e("div",Ie,[S(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[10]||(o[10]=t=>l.filterParams.search=t),onInput:o[11]||(o[11]=(...t)=>l.getBooks&&l.getBooks(...t)),placeholder:"Kitap, Yazar"},null,544),[[W,l.filterParams.search]]),Te])])])]))}},Ae={key:0,class:"text-danger"},Ue=["placeholder","required","value"],w={__name:"BaseInput",props:{modelValue:{type:String,default:""},label:{type:String,default:""},is_required:{type:Boolean,default:!1}},setup(l){return(c,m)=>(s(),n(f,null,[e("label",null,[j(d(l.label),1),l.is_required?(s(),n("span",Ae,"*")):F("",!0)]),e("input",X({type:"text",class:"form-control",placeholder:l.label,required:l.is_required,value:l.modelValue,onInput:m[0]||(m[0]=a=>c.$emit("update:modelValue",a.target.value))},c.$attrs),null,16,Ue)],64))}},Le={key:0,class:"text-danger"},Fe=["value"],Ke=e("option",{value:null},"Filtreyi Temizle",-1),qe=["value"],L={__name:"BaseSelect",props:{modelValue:{type:[String,Number,Boolean,Object,Array],default:null},label:{type:String,default:""},is_required:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},setup(l){return(c,m)=>(s(),n("div",null,[e("label",null,[j(d(l.label),1),l.is_required?(s(),n("span",Le,"*")):F("",!0)]),e("select",{value:l.modelValue,class:"form-select",onChange:m[0]||(m[0]=a=>c.$emit("update:modelValue",a.target.value))},[Ke,(s(!0),n(f,null,k(l.options,a=>(s(),n("option",{value:a.id},d(a.name),9,qe))),256))],40,Fe)]))}},ze={key:0},De=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),Z={__name:"Alert",props:{type:{type:String,default:"danger"},message:{type:[Object,Array,String]}},setup(l){const c=l;return console.log(c.message),console.log(typeof c.message=="string"),(m,a)=>(s(),n("div",{class:A(["alert alert-dismissible fade show","alert-"+l.type]),role:"alert"},[typeof c.message=="string"?(s(),n("p",ze,d(l.message),1)):(s(!0),n(f,{key:1},k(l.message,v=>(s(),n("ul",null,[(s(!0),n(f,null,k(v,b=>(s(),n("li",null,d(b),1))),256))]))),256)),De],2))}};const N=l=>(O("data-v-c6b8be8e"),l=l(),E(),l),je=N(()=>e("a",{class:"btn btn-outline-info px-5","data-bs-toggle":"collapse",href:"#bookAdd",role:"button"}," Kitap Ekle ",-1)),Ye={class:"card shadow"},Oe={class:"card-body"},Ee={class:"row"},Ne={class:"mb-4 col-md-6"},Me={class:"mb-4 col-md-6"},Ge={class:"mb-4 col-md-6"},He={class:"mb-4 col-md-6"},Re={class:"mb-4 col-md-6"},Ze={class:"mb-4 col-md-6"},Je={class:"mb-4 col-md-6"},Qe={class:"mb-4 col-md-6"},We={class:"mb-4 col-md-6"},Xe={class:"mb-4 col-md-6"},et={key:0,class:"mt-4 d-flex gap-2 justify-content-end"},tt=N(()=>e("button",{type:"submit",class:"btn btn-dark"},"Kaydet",-1)),lt={key:1,class:"mt-4"},at=N(()=>e("button",{type:"submit",class:"btn btn-primary"},"Ekle",-1)),st=[at],ot={__name:"BookAdd",props:{getBooks:{type:Function,required:!0}},setup(l,{expose:c}){const m=l,{index:a,store:v,update:b,errors:o}=z(),t=g({}),_=g({}),V=g(""),K=()=>{a("type").then(p=>{_.value.types=p}),a("status").then(p=>{_.value.status=p.data}),a("list_types").then(p=>{_.value.list_types=p.data}),a("libraries").then(p=>{_.value.libraries=p.data})},q=()=>{o.value=null,V.value=null,v("books",t.value).then(p=>{p&&(p&&(V.value=t.value.name+" Kitabı Başarıyla Eklendi!"),t.value={},m.getBooks())})},U=()=>{b("books",t.value.id,t.value).then(p=>{p&&(p&&(V.value=t.value.name+" Kitabı Başarıyla Güncellendi!"),t.value={},m.getBooks())})},$=()=>{t.value={}};return c({book:t}),D(()=>{K()}),(p,i)=>(s(),n("div",null,[je,e("div",{class:A(["collapse mt-2",{show:t.value.edit}]),id:"bookAdd"},[R(o)?(s(),H(Z,{key:0,message:R(o)},null,8,["message"])):F("",!0),V.value?(s(),H(Z,{key:1,message:V.value,type:"success"},null,8,["message"])):F("",!0),e("div",Ye,[e("div",Oe,[e("form",{onSubmit:i[10]||(i[10]=ee(u=>t.value.edit?U():q(),["prevent"]))},[e("div",Ee,[e("div",Ne,[y(w,{label:"Kitap Adı",modelValue:t.value.name,"onUpdate:modelValue":i[0]||(i[0]=u=>t.value.name=u)},null,8,["modelValue"])]),e("div",Me,[y(w,{label:"Yazar Adı",modelValue:t.value.author,"onUpdate:modelValue":i[1]||(i[1]=u=>t.value.author=u)},null,8,["modelValue"])]),e("div",Ge,[y(w,{label:"Yayın Evi",modelValue:t.value.publisher,"onUpdate:modelValue":i[2]||(i[2]=u=>t.value.publisher=u)},null,8,["modelValue"])]),e("div",He,[y(w,{type:"number",label:"Sayfa Sayısı",modelValue:t.value.page_count,"onUpdate:modelValue":i[3]||(i[3]=u=>t.value.page_count=u)},null,8,["modelValue"])]),e("div",Re,[y(w,{type:"date",label:"Satın Alma Tarihi",modelValue:t.value.buy_date,"onUpdate:modelValue":i[4]||(i[4]=u=>t.value.buy_date=u)},null,8,["modelValue"])]),e("div",Ze,[y(w,{type:"date",label:"Okunma Tarihi",modelValue:t.value.read_date,"onUpdate:modelValue":i[5]||(i[5]=u=>t.value.read_date=u)},null,8,["modelValue"])]),e("div",Je,[y(L,{options:_.value.types,modelValue:t.value.type_id,"onUpdate:modelValue":i[6]||(i[6]=u=>t.value.type_id=u),label:"Kitap Türü"},null,8,["options","modelValue"])]),e("div",Qe,[y(L,{options:_.value.list_types,modelValue:t.value.list_type_id,"onUpdate:modelValue":i[7]||(i[7]=u=>t.value.list_type_id=u),label:"Listeleneceği Yer"},null,8,["options","modelValue"])]),e("div",We,[y(L,{options:_.value.status,modelValue:t.value.status,"onUpdate:modelValue":i[8]||(i[8]=u=>t.value.status=u),label:"Durum"},null,8,["options","modelValue"])]),e("div",Xe,[y(L,{options:_.value.libraries,modelValue:t.value.in_library,"onUpdate:modelValue":i[9]||(i[9]=u=>t.value.in_library=u),label:"Kütüphanede"},null,8,["options","modelValue"])]),t.value.edit?(s(),n("div",et,[e("button",{onClick:$,class:"btn btn-danger"},"Vazgeç"),tt])):(s(),n("div",lt,st))])],32)])])],2)]))}},nt=Y(ot,[["__scopeId","data-v-c6b8be8e"]]);const M=l=>(O("data-v-4a1c655c"),l=l(),E(),l),it={"aria-label":"Page navigation",class:"d-flex gap-2 align-items-baseline mt-3"},dt={class:"pagination"},ut=M(()=>e("i",{class:"fa-solid fa-angle-left"},null,-1)),rt=[ut],ct=["onClick"],mt=M(()=>e("i",{class:"fa-solid fa-angle-right"},null,-1)),vt=[mt],bt=M(()=>e("strong",null,"Toplam Kayıt:",-1)),pt={__name:"Pagination",props:{pageInfo:{type:Object},getData:{type:Function}},setup(l){const c=l;return c.pageInfo.current_page=c.pageInfo.current_page??1,(m,a)=>(s(),n("nav",it,[e("ul",dt,[e("li",{class:A(["page-item",{disabled:l.pageInfo.current_page===1}])},[e("a",{role:"button",class:"page-link",onClick:a[0]||(a[0]=v=>l.getData(l.pageInfo.current_page-1))},rt)],2),(s(!0),n(f,null,k(l.pageInfo.last_page,v=>(s(),n("li",{class:A(["page-item",{active:v===l.pageInfo.current_page}]),key:v},[e("a",{role:"button",class:"page-link",onClick:b=>l.getData(v)},d(v),9,ct)],2))),128)),e("li",{class:A(["page-item",{disabled:l.pageInfo.current_page===l.pageInfo.last_page}])},[e("a",{role:"button",class:"page-link",onClick:a[1]||(a[1]=v=>l.getData(l.pageInfo.current_page+1))},vt)],2)]),e("small",null,[bt,j(" "+d(l.pageInfo.total),1)])]))}},_t=Y(pt,[["__scopeId","data-v-4a1c655c"]]);const I=l=>(O("data-v-5344d917"),l=l(),E(),l),yt={class:"card"},gt=I(()=>e("div",{class:"card-header"},null,-1)),ft={class:"card-body"},ht={class:"d-flex justify-content-between mb-4"},kt={key:0,class:"d-flex justify-content-center align-items-center",style:{height:"70vh"}},$t=I(()=>e("div",{class:"spinner-border",role:"status"},[e("span",{class:"sr-only"},"Loading...")],-1)),Vt=[$t],Bt={key:1,class:"table-responsive"},xt={class:"table table-striped table-hover"},Pt=["onClick"],St={class:"d-flex gap-1"},wt=I(()=>e("span",null,[e("i",{role:"button",class:"fa-solid fa-sort fa-xs"})],-1)),It=I(()=>e("th",{scope:"col",class:"text-center"},"İşlem",-1)),Tt={class:"d-flex gap-2"},Ct=["onClick"],At=I(()=>e("i",{class:"fa-regular fa-pen-to-square"},null,-1)),Ut=[At],Lt=["onClick"],Ft=I(()=>e("i",{class:"fa-solid fa-trash-can"},null,-1)),Kt=[Ft],qt={__name:"Books",setup(l){const c=g(null),m=g({}),a=g({}),v=g(!1),b=g(),o=g({}),t={id:"ID",name:"Kitap",author:"Yazar",publisher:"Yayıncı",page_count:"Sayfa",type:"Tür",buy_date:"Satın Alma",read_date:"Okunma",list_type:"Listelenecek Yer",status:"Durum",in_library:"Kütüphanede"},_=g({row:"id",type:"asc"}),{index:V,show:K,destroy:q}=z(),U=te(),$=()=>{v.value=!0;const h={page:o.value.currentPage,byPage:a.value.byPage,byType:a.value.byType,byListType:a.value.byListType,byStatus:a.value.byStatus,byLibrary:a.value.byLibrary,search:a.value.search,orderBy:_.value.row,orderType:_.value.type};V("books",h).then(B=>{c.value=B.data,v.value=!1,o.value=B.meta})},p=h=>{o.value.currentPage=h,$()},i=h=>{_.value={row:h,type:_.value.type=="asc"?"desc":"asc"},$()},u=h=>{K("books",h).then(B=>{var P,T;let r=B.data;const x={...r,status:(P=r.status)==null?void 0:P.id,list_type_id:r.list_type.id,in_library:(T=r.in_library)==null?void 0:T.id,type_id:r.list_type.id,edit:!0};b.value.book=x,window.scrollTo(0,0)})},J=h=>{confirm("Silmek istediğine emin misin?")&&q("books",h).then(B=>{B&&$()})};return D(()=>{U.params.id&&(a.value.byListType=U.params.id),$()}),(h,B)=>(s(),n("div",yt,[gt,e("div",ft,[e("div",ht,[y(nt,{"get-books":$,ref_key:"bookAddComp",ref:b,"edit-book":m.value},null,8,["edit-book"])]),y(Ce,{"get-books":$,"filter-params":a.value},null,8,["filter-params"]),v.value?(s(),n("div",kt,Vt)):(s(),n("div",Bt,[e("table",xt,[e("thead",null,[e("tr",null,[(s(),n(f,null,k(t,(r,x)=>e("th",{key:x,scope:"col",onClick:P=>i(x),role:"button"},[e("div",St,[wt,e("span",null,d(r),1)])],8,Pt)),64)),It])]),e("tbody",null,[(s(!0),n(f,null,k(c.value,r=>{var x,P,T,G;return s(),n("tr",null,[e("th",null,d(r.id),1),e("td",null,d(r.name),1),e("td",null,[e("a",null,d(r.author),1)]),e("td",null,d(r.publisher),1),e("td",null,d(r.page_count),1),e("td",null,d((x=r.type)==null?void 0:x.name),1),e("td",null,d(r.buy_date),1),e("td",null,d(r.read_date),1),e("td",null,d((P=r.list_type)==null?void 0:P.name),1),e("td",null,d((T=r.status)==null?void 0:T.name),1),e("td",null,d((G=r.in_library)==null?void 0:G.name),1),e("td",null,[e("div",Tt,[e("button",{class:"btn btn-outline-dark",onClick:Q=>u(r.id)},Ut,8,Ct),e("button",{class:"btn btn-outline-danger",onClick:Q=>J(r.id)},Kt,8,Lt)])])])}),256))])])])),y(_t,{"page-info":o.value,"get-data":p},null,8,["page-info"])])]))}},Yt=Y(qt,[["__scopeId","data-v-5344d917"]]);export{Yt as default};
